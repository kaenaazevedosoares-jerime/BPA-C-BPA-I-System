# ğŸ—ï¸ Diagrama de Arquitetura - Sistema BPA-C/BPA-I

## ğŸ“ Arquitetura Geral

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USUÃRIOS                                 â”‚
â”‚  ğŸ‘¨â€âš•ï¸ Admin    ğŸ‘©â€âš•ï¸ Operador    ğŸ¦· Profissional    ğŸ‘¤ PÃºblico      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND (React + TypeScript)                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  CAMADA DE APRESENTAÃ‡ÃƒO                                     â”‚ â”‚
â”‚ â”‚  â€¢ Vite (Build Tool)                                        â”‚ â”‚
â”‚ â”‚  â€¢ React 19.2.3                                             â”‚ â”‚
â”‚ â”‚  â€¢ TypeScript                                               â”‚ â”‚
â”‚ â”‚  â€¢ Dark/Light Theme                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  COMPONENTES PRINCIPAIS                                     â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚ â”‚  â”‚Dashboard â”‚  â”‚ Sidebar  â”‚  â”‚  Header  â”‚  â”‚  Charts  â”‚   â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  PÃGINAS (16 Views)                                         â”‚ â”‚
â”‚ â”‚  â€¢ Login/Register        â€¢ Dashboard                        â”‚ â”‚
â”‚ â”‚  â€¢ Patient Registration  â€¢ Procedure Form/List              â”‚ â”‚
â”‚ â”‚  â€¢ BPA-C Form           â€¢ BPA Production                    â”‚ â”‚
â”‚ â”‚  â€¢ Profissionais        â€¢ Settings                          â”‚ â”‚
â”‚ â”‚  â€¢ CatÃ¡logos (CBO, Procedures, Streets, Establishments)     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  HOOKS & SERVICES                                           â”‚ â”‚
â”‚ â”‚  â€¢ usePermissions       â€¢ useDashboardStats                 â”‚ â”‚
â”‚ â”‚  â€¢ Supabase Client      â€¢ Excel Import/Export               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ HTTPS/REST API
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SUPABASE (BaaS)                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  AUTENTICAÃ‡ÃƒO                                               â”‚ â”‚
â”‚ â”‚  â€¢ Supabase Auth                                            â”‚ â”‚
â”‚ â”‚  â€¢ JWT Tokens                                               â”‚ â”‚
â”‚ â”‚  â€¢ Session Management                                       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  POSTGRES DATABASE                                          â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚ â”‚  â”‚  TABELAS PRINCIPAIS                                   â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ profiles (usuÃ¡rios)                                â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ patients (pacientes)                               â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ profissionais (profissionais de saÃºde)             â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ procedure_production (BPA-I)                       â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ bpa_consolidated + items (BPA-C)                   â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ establishments (unidades)                          â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ procedures_catalog (catÃ¡logo SUS)                  â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ cbos (ocupaÃ§Ãµes)                                   â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ whatsapp_templates                                 â”‚  â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚ â”‚                                                               â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚ â”‚  â”‚  VIEWS (Dashboard)                                    â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ vw_dashboard_bpai_status                           â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ vw_dashboard_bpai_procedures                       â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ vw_dashboard_bpai_professionals                    â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ vw_dashboard_bpac_units                            â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ vw_dashboard_bpac_professionals                    â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ vw_dashboard_bpac_procedures                       â”‚  â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚ â”‚                                                               â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚ â”‚  â”‚  FUNÃ‡Ã•ES & TRIGGERS                                   â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ handle_new_user() - Auto-create profile            â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ search_patients() - Busca sem acentuaÃ§Ã£o           â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ search_procedures() - Busca procedimentos          â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ search_cbos() - Busca ocupaÃ§Ãµes                    â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ set_updated_at_profissionais() - Timestamp         â”‚  â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚ â”‚                                                               â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚ â”‚  â”‚  SEGURANÃ‡A (RLS)                                      â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ Row Level Security em todas as tabelas            â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ PolÃ­ticas baseadas em auth.role()                 â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ Acesso pÃºblico limitado (auto-cadastro)           â”‚  â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚ â”‚                                                               â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚ â”‚  â”‚  EXTENSÃ•ES                                            â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ pgcrypto (UUIDs, criptografia)                     â”‚  â”‚ â”‚
â”‚ â”‚  â”‚  â€¢ unaccent (busca sem acentuaÃ§Ã£o)                    â”‚  â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DEPLOY & HOSTING                              â”‚
â”‚  â€¢ Vercel (Frontend)                                             â”‚
â”‚  â€¢ Supabase Cloud (Backend/Database)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Fluxo de Dados

### 1. AutenticaÃ§Ã£o
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Login      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Validate    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UsuÃ¡rio â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ Supabase Authâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚   JWT    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚                              â”‚
                                    â”‚ Trigger                      â”‚
                                    â–¼                              â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
                            â”‚handle_new_userâ”‚                      â”‚
                            â”‚  (auto-create â”‚                      â”‚
                            â”‚    profile)   â”‚                      â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
                                    â”‚                              â”‚
                                    â–¼                              â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Session     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   profiles   â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Frontend â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Cadastro de Procedimento BPA-I
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Seleciona    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Autocomplete  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Operador â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ProcedureForm â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ patients â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚                              â”‚
                                    â”‚ Busca                        â”‚
                                    â–¼                              â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
                            â”‚ procedures_  â”‚                       â”‚
                            â”‚   catalog    â”‚                       â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
                                    â”‚                              â”‚
                                    â”‚ Salva                        â”‚
                                    â–¼                              â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    FK: patient_id    â”‚
                            â”‚ procedure_   â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ production   â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ Atualiza
                                    â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚  Dashboard   â”‚
                            â”‚    Views     â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Dashboard (MÃ©tricas em Tempo Real)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Seleciona    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Query Views   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UsuÃ¡rio â”‚   Filtros      â”‚  Dashboard   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚PostgreSQLâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚  Views   â”‚
                                    â–²                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚                              â”‚
                                    â”‚ Renderiza                    â”‚
                                    â”‚ GrÃ¡ficos                     â”‚
                                    â”‚                              â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Aggregate     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚SimpleCharts  â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   Data   â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ Modelo de Relacionamentos (ER Simplificado)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   auth.usersâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1:1
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  profiles   â”‚         â”‚  profissionais   â”‚
â”‚  (usuÃ¡rios) â”‚         â”‚  (profissionais) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                         â”‚
       â”‚ created_by              â”‚ professional_id
       â”‚ 1:N                     â”‚ 1:N
       â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      procedure_production (BPA-I)    â”‚
â”‚  â€¢ patient_id (FK)                   â”‚
â”‚  â€¢ procedure_code (FK)               â”‚
â”‚  â€¢ professional_id (FK)              â”‚
â”‚  â€¢ created_by (FK)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ patient_id
         â”‚ N:1
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  patients   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ establishments   â”‚         â”‚ profissionais    â”‚
â”‚  (unidades)      â”‚         â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ cnes                       â”‚ professional_id
         â”‚ 1:N                        â”‚ 1:N
         â–¼                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      bpa_consolidated (BPA-C)        â”‚
â”‚  â€¢ cnes (FK)                         â”‚
â”‚  â€¢ professional_id (FK)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ bpa_id
         â”‚ 1:N
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    bpa_consolidated_items            â”‚
â”‚  â€¢ bpa_id (FK)                       â”‚
â”‚  â€¢ procedure_info                    â”‚
â”‚  â€¢ cbo_info                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ procedures_      â”‚
â”‚   catalog        â”‚
â”‚  (catÃ¡logo SUS)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      cbos        â”‚
â”‚  (ocupaÃ§Ãµes)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  whatsapp_       â”‚
â”‚   templates      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Camadas de SeguranÃ§a

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CAMADA 1: AUTENTICAÃ‡ÃƒO                                          â”‚
â”‚  â€¢ Supabase Auth (JWT)                                           â”‚
â”‚  â€¢ Session Management                                            â”‚
â”‚  â€¢ Password Hashing (Supabase)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CAMADA 2: AUTORIZAÃ‡ÃƒO (RBAC)                                    â”‚
â”‚  â€¢ Roles: admin | operator                                       â”‚
â”‚  â€¢ Permissions (JSONB granular)                                  â”‚
â”‚  â€¢ Hook: usePermissions()                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CAMADA 3: ROW LEVEL SECURITY (RLS)                              â”‚
â”‚  â€¢ PolÃ­ticas por tabela                                          â”‚
â”‚  â€¢ auth.role() = 'authenticated'                                 â”‚
â”‚  â€¢ ExceÃ§Ãµes pÃºblicas (anon) para auto-cadastro                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CAMADA 4: VALIDAÃ‡ÃƒO DE DADOS                                    â”‚
â”‚  â€¢ TypeScript (compile-time)                                     â”‚
â”‚  â€¢ Constraints SQL (NOT NULL, UNIQUE)                            â”‚
â”‚  â€¢ Foreign Keys                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Fluxo de Status de Procedimento

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AGENDADO   â”‚ â† Estado inicial
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Paciente comparece
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CONSULTA/   â”‚
â”‚   MOLDE     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Molde enviado ao laboratÃ³rio
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     EM      â”‚
â”‚  PRODUÃ‡ÃƒO   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ PrÃ³tese pronta
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AGENDADO   â”‚
â”‚   ENTREGA   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ PrÃ³tese entregue
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Processado no SIA
â”‚ FINALIZADO  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> sia_processed = true
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         date_sia = [data]

       OU

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CANCELADO   â”‚ â† Pode ocorrer em qualquer etapa
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   date_cancellation = [data]
```

---

## ğŸ¨ Estrutura de Componentes React

```
App.tsx (Root)
â”‚
â”œâ”€â”€ Login/Register (Rotas pÃºblicas)
â”‚
â”œâ”€â”€ Layout (Rotas autenticadas)
â”‚   â”‚
â”‚   â”œâ”€â”€ Sidebar
â”‚   â”‚   â”œâ”€â”€ Navigation Menu
â”‚   â”‚   â””â”€â”€ User Profile
â”‚   â”‚
â”‚   â”œâ”€â”€ Header
â”‚   â”‚   â”œâ”€â”€ Theme Toggle
â”‚   â”‚   â”œâ”€â”€ Patient Search
â”‚   â”‚   â””â”€â”€ Breadcrumb
â”‚   â”‚
â”‚   â””â”€â”€ Main Content (Router)
â”‚       â”‚
â”‚       â”œâ”€â”€ Dashboard
â”‚       â”‚   â”œâ”€â”€ Filters (Month/Year)
â”‚       â”‚   â”œâ”€â”€ Tabs (BPA-I / BPA-C)
â”‚       â”‚   â”œâ”€â”€ Status Cards
â”‚       â”‚   â””â”€â”€ Charts (SimpleBarChart)
â”‚       â”‚
â”‚       â”œâ”€â”€ PatientRegistration
â”‚       â”‚   â”œâ”€â”€ Form Fields
â”‚       â”‚   â””â”€â”€ Address Autocomplete
â”‚       â”‚
â”‚       â”œâ”€â”€ ProcedureForm
â”‚       â”‚   â”œâ”€â”€ Patient Autocomplete
â”‚       â”‚   â”œâ”€â”€ Procedure Autocomplete
â”‚       â”‚   â””â”€â”€ Status Workflow
â”‚       â”‚
â”‚       â”œâ”€â”€ ProcedureList
â”‚       â”‚   â”œâ”€â”€ Filters
â”‚       â”‚   â”œâ”€â”€ Table
â”‚       â”‚   â””â”€â”€ Export (Excel)
â”‚       â”‚
â”‚       â”œâ”€â”€ BpaConsolidatedForm
â”‚       â”‚   â”œâ”€â”€ Header (CNES, Month)
â”‚       â”‚   â””â”€â”€ Items (Procedures + CBO)
â”‚       â”‚
â”‚       â”œâ”€â”€ Profissionais
â”‚       â”‚   â”œâ”€â”€ List
â”‚       â”‚   â””â”€â”€ Form
â”‚       â”‚
â”‚       â”œâ”€â”€ CatÃ¡logos
â”‚       â”‚   â”œâ”€â”€ Procedures
â”‚       â”‚   â”œâ”€â”€ CBOs
â”‚       â”‚   â”œâ”€â”€ Establishments
â”‚       â”‚   â””â”€â”€ Street Types
â”‚       â”‚
â”‚       â””â”€â”€ Settings (Admin only)
â”‚           â”œâ”€â”€ User Management
â”‚           â””â”€â”€ Permissions
â”‚
â””â”€â”€ PublicProfissionalRegistration (Rota pÃºblica especial)
```

---

## ğŸ”Œ IntegraÃ§Ãµes Externas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SISTEMA BPA-C/BPA-I                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚               â”‚               â”‚
         â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase   â”‚  â”‚   Excel     â”‚  â”‚  WhatsApp   â”‚
â”‚   (BaaS)    â”‚  â”‚ Import/Exportâ”‚  â”‚  Templates  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â”‚ (Futuro)
                                         â–¼
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚ WhatsApp APIâ”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  FUTURAS      â”‚
         â”‚  INTEGRAÃ‡Ã•ES  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”
         â”‚       â”‚       â”‚
         â–¼       â–¼       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DATASUS  â”‚ â”‚e-SUS â”‚ â”‚ SIA/SUS  â”‚
â”‚   API    â”‚ â”‚  AB  â”‚ â”‚  Export  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ Estrutura de Pastas Detalhada

```
BPA-C-BPA-I-System/
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/              # Componentes reutilizÃ¡veis
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx          # Menu lateral
â”‚   â”‚   â”œâ”€â”€ Header.tsx           # Barra superior
â”‚   â”‚   â”œâ”€â”€ ErrorBoundary.tsx    # Tratamento de erros
â”‚   â”‚   â”œâ”€â”€ SimpleCharts.tsx     # GrÃ¡ficos
â”‚   â”‚   â”œâ”€â”€ PatientImportModal.tsx
â”‚   â”‚   â”œâ”€â”€ ProcedureImportModal.tsx
â”‚   â”‚   â”œâ”€â”€ BpaConsolidatedCard.tsx
â”‚   â”‚   â”œâ”€â”€ EstablishmentCard.tsx
â”‚   â”‚   â””â”€â”€ ProfissionalCard.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                   # PÃ¡ginas/Views
â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx        # Dashboard principal
â”‚   â”‚   â”œâ”€â”€ Login.tsx
â”‚   â”‚   â”œâ”€â”€ Register.tsx
â”‚   â”‚   â”œâ”€â”€ PatientRegistration.tsx
â”‚   â”‚   â”œâ”€â”€ ProcedureForm.tsx
â”‚   â”‚   â”œâ”€â”€ ProcedureList.tsx
â”‚   â”‚   â”œâ”€â”€ BpaConsolidatedForm.tsx
â”‚   â”‚   â”œâ”€â”€ BpaProductionForm.tsx
â”‚   â”‚   â”œâ”€â”€ ProfissionaisList.tsx
â”‚   â”‚   â”œâ”€â”€ ProfissionalForm.tsx
â”‚   â”‚   â”œâ”€â”€ PublicProfissionalRegistration.tsx
â”‚   â”‚   â”œâ”€â”€ EstablishmentRegistration.tsx
â”‚   â”‚   â”œâ”€â”€ ProcedureCatalog.tsx
â”‚   â”‚   â”œâ”€â”€ CboRegistration.tsx
â”‚   â”‚   â”œâ”€â”€ StreetTypeCatalog.tsx
â”‚   â”‚   â””â”€â”€ Settings.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                   # Custom Hooks
â”‚   â”‚   â”œâ”€â”€ usePermissions.ts    # Controle de permissÃµes
â”‚   â”‚   â””â”€â”€ useDashboardStats.ts # EstatÃ­sticas do dashboard
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                     # Bibliotecas/ConfiguraÃ§Ãµes
â”‚   â”‚   â””â”€â”€ supabase.ts          # Cliente Supabase
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                # ServiÃ§os de API
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                   # DefiniÃ§Ãµes TypeScript
â”‚   â”‚   â””â”€â”€ permissions.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                   # UtilitÃ¡rios
â”‚   â”‚
â”‚   â”œâ”€â”€ App.tsx                  # Componente raiz
â”‚   â”œâ”€â”€ index.tsx                # Entry point
â”‚   â””â”€â”€ types.ts                 # Types globais
â”‚
â”œâ”€â”€ database-mestre.sql          # Schema completo
â”œâ”€â”€ migration_*.sql              # MigraÃ§Ãµes especÃ­ficas
â”œâ”€â”€ supabase_search_functions.sql
â”œâ”€â”€ whatsapp_templates_migration.sql
â”‚
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ vercel.json
â”œâ”€â”€ .env
â”œâ”€â”€ .env.example
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

---

## ğŸš€ Deploy Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Developer   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ git push
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GitHub     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ webhook
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Vercel     â”‚ â† Build & Deploy Frontend
â”‚  (CI/CD)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Deploy
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Production  â”‚ â†’ https://[app].vercel.app
â”‚   (Vercel)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ API Calls
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase    â”‚ â† Database & Auth
â”‚    Cloud     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Documento gerado por:** Antigravity AI  
**Ãšltima atualizaÃ§Ã£o:** 21/01/2026 23:41
